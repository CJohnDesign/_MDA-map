$(document).ready(function(){function a(){d=$("#main").width()-g.left-g.right,e=[.8*d,.75*$(window).height()],f=d3.min(e),d3.select("#map_svg").attr("width",d).attr("height",f),console.log(f)}function b(){var a=d3.event.transform;d3.select("#map_g").attr("transform","translate("+a.x+","+a.y+") scale("+a.k+")")}function c(a,b,c){function d(a){var b=a.properties.name;return b}function e(a){var b=a.properties.abbr.abbreviation;return console.log(b),b}var f=topojson.feature(b,b.objects.states).features,g=c[0];n(g),j.selectAll(".state").data(f).enter().append("path").attr("class","state").attr("id",d).attr("d",k).on("mouseover",function(a){d3.select(this).classed("state--hover",!0)}).on("mouseout",function(a){d3.select(this).classed("state--hover",!1)}).on("click",function(a){var b=d(a);l(g,b,c),d3.select(this).classed("state--selected")?d3.select(this).classed("state--selected",!1):d3.select(this).classed("state--selected",!0)}),j.selectAll(".stateText").data(f).enter().append("text").attr("x",function(a){return k.centroid(a)[0]}).attr("y",function(a){return k.centroid(a)[1]}).attr("text-anchor","middle").attr("font-size","12px").text(e)}var d,e,f,g={top:0,left:0,right:0,bottom:0};a(),d3.select(window).on("resize",a);var h=d3.zoom().scaleExtent([.5,50]).on("zoom",b),i=d3.geoAlbersUsa().translate([d/2,f/2]).scale([d]),j=d3.select("#main").append("svg").attr("width",d).attr("height",f).attr("id","map_svg").style("border","5px solid #9ba725").call(h).append("g").attr("id","map_g");d3.queue().defer(d3.json,"/cs/cch-mda/docs/us.topojson").defer(d3.csv,"/cs/cch-mda/docs/licensure-ap.csv").await(c);var k=d3.geoPath().projection(i),l=function(a,b,c){var d=b.split(" ").join("-"),e=d+"-row",f=document.getElementById(e);if(console.log(d),console.log(e),console.log(f),f)return void d3.select("#"+e).remove();var g=d3.keys(a),h=m(b,c),i=d3.select("tbody").insert("tr",":first-child").attr("id",d+"-row").attr("class","state-row");for(var j in g){var k=g[j],l=h[k];i.append("td").attr("class",k+"-cell").text(l)}},m=function(a,b){for(var c in b){var d=b[c].State;if(a===d)return b[c]}return null},n=function(a){var b=d3.select("#info").append("table").attr("id","info_table"),c=b.append("thead");b.append("tbody").attr("id","tbody");c.append("tr").selectAll("th").data(d3.keys(a)).enter().append("th").text(function(a){return a})}});