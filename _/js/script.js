$(document).ready(function(){function a(){var a=d3.zoomTransform(this);d3.select("#map_g").attr("transform","translate("+a.x+","+a.y+") scale("+a.k+")")}function b(a,b,c){function d(a){var b=a.properties.name;return b}var e=0,f=topojson.feature(b,b.objects.states).features;g.selectAll(".state").data(f).enter().append("path").attr("class","state").attr("id",d).attr("d",i).on("mouseover",function(a){d3.select(this).classed("state--hover",!0)}).on("mouseout",function(a){d3.select(this).classed("state--hover",!1)}).on("click",function(a){if(d3.select(this).classed("state--selected")?(d3.select(this).classed("state--selected",!1),e--,console.log(e)):(d3.select(this).classed("state--selected",!0),e++,console.log(e)),10>=e)for(var b=0;b<c.length;b++){var d=d3.select(this).attr("id"),f=c[b].State;d==f?(d3.select("#tbody").append("tr"),console.log(c[b].length).append("td").text(c[b].id).parent.append("td").text(c[b].state).append("td").text(c[b]["Application Type"])):(console.log(f),console.log("fuck"))}else console.log("fail")});var h=d3.select("#info").append("table").attr("id","info_table").style("border","2px solid #9ba725"),j=h.append("thead");h.append("tbody").attr("id","tbody");j.append("tr").selectAll("th").data(d3.keys(c[0])).enter().append("th").text(function(a){return a})}var c={top:50,left:50,right:50,bottom:50},d=300-c.top-c.bottom,e=400-c.left-c.right,f=d3.zoom().scaleExtent([1,8]).on("zoom",a),g=d3.select("#main").append("svg").attr("width",e+c.left+c.right).attr("height",d+c.top+c.bottom).attr("id","map_svg").style("border","2px solid #9ba725").append("g").attr("id","map_g").call(f);d3.queue().defer(d3.json,"/json/us.topojson").defer(d3.csv,"/csv/licensure.csv").await(b);var h=d3.geoAlbersUsa().translate([e/2,d/2]).scale([500]),i=d3.geoPath().projection(h)});